<!DOCTYPE html>
<html>
<head>
    <title>Intel Gathering System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>üïµÔ∏è Information Gathering System</h1>
        
        <div class="input-section">
            <input type="text" id="target" placeholder="Enter target domain/IP">
            <button onclick="gatherIntel()">Gather Intel</button>
        </div>
        
        <div id="results"></div>
        
        <h2>Recent Intelligence</h2>
        <div id="intel-list"></div>
    </div>

    <script>
        async function gatherIntel() {
            const target = document.getElementById('target').value;
            const results = document.getElementById('results');
            
            results.innerHTML = '<p>üîç Gathering intelligence...</p>';
            
            const response = await fetch('/gather', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({target: target})
            });
            
            const intel = await response.json();
            results.innerHTML = `
                <div class="intel-card">
                    <h3>${intel.target}</h3>
                    <p>IP: ${intel.ip}</p>
                    <p>Ports: ${intel.ports.join(', ')}</p>
                    <p>OS: ${intel.os}</p>
                    <p>Time: ${intel.timestamp}</p>
                </div>
            `;
            loadIntel();
        }
        
        async function loadIntel() {
            const response = await fetch('/intel');
            const intel = await response.json();
            const list = document.getElementById('intel-list');
            list.innerHTML = intel.map(i => 
                `<div class="intel-item">
                    <strong>${i.target}</strong> (${i.ip}) - ${i.collected_at}
                </div>`
            ).join('');
        }
        
        loadIntel();
    </script>
</body>
</html>
